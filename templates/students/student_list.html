{% extends 'base.html' %}
{% load staticfiles %}


{% block title %}Students PyBursa{% endblock title %}


{% block nav_class_student %}active{% endblock %}


{% block content %}


  <div class="main_font">

  {% if messages %}
  <ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}


    <a href="{% url 'students:add' %}">
      <button type="button" class="btn btn-default">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
      Добавить нового студента
      </button>
    </a>    
  <h1>Список студентов</h1>   
    <div class="container-fluid">       
      <table class="table">
        <thead class="table-bordered">
          <tr>
            <th>Фамилия Имя</th>
            <th>Адрес</th>
            <th>Skype</th>
            <th>Курсы</th>
          </tr>
        </thead>
        <tbody class="table-bordered">
          {% for student in object_list %}
          <tr>
            <td><a href="{% url 'students:detail' student.id %}">{{ student.name }} {{ student.surname }}</a></td>
            <td>{{ student.address }}</td>
            <td>{{ student.skype }}</td>
            <td>
            {% for course in student.courses.all %} 
            <a href="{% url 'courses:detail' course.id %}">{{ course.name }}<br/></a>
            {% endfor %}
            <a href="{% url 'students:edit' student.id %}">
              <button type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Изменить
              </button>
            </a> 
            <a href="{% url 'students:remove' student.id %}">
              <button type="button" class="btn btn-default">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Удалить
              </button>
            </a>
            </td>
          {% endfor %}  
          </tr>
        </tbody>
      </table>
    </div>          
  </div>

  <nav>
    <ul class="pagination pagination-centered">
      {% if page_obj.has_previous %}
      <li><a href="?page={{ page_obj.previous_page_number }}">&laquo; previous</a></li>
      {% endif %}

      {% for page in  paginator.page_range %}
      <li {% if page_obj.number == page %} class = "active" {% endif %}><a href="?page={{ page }}">{{ page }}</a></li>
      {% endfor %}

      {% if page_obj.has_next %}
      <li><a href="?page={{ page_obj.next_page_number }}">next &raquo;</a></li>
      {% endif %}
    </ul>
  </nav>

{% endblock content %}
